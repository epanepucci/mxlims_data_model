{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "Shipment",
    "title": "Shipment",
    "type": "object",
    "id": "Shipment.json",
    "allOf": [
        {
            "$ref": "../core/LogisticalSample.json"
        }
    ],
    "$defs": {
        "ShipmentData": {
            "type": "object",
            "title": "Shipment Data",
            "description": "<p>Data for a shipment.</p><p>If only one of <code>labContactOutbound</code> and <code>labContactReturn</code> is present, both are assumed to be the same. If neither is present, the lab contact for both outbound and return is assumed to be the authenticated user submitting the shipment.</p>",
            "comment": "TODO diffraction plan for additional properties",
            "allOf": [
                {
                    "$ref": "../core/MxlimsData.json"
                }
            ],
            "properties": {
                "mxlimsType": {
                    "const": "Shipment",
                    "description": "The type of MXLIMS object.",
                    "title": "Mxlims Type",
                    "type": "string"
                },
                "proposalCode": {
                    "type": "string",
                    "description": "The proposal number at the receiving facility.",
                    "examples": [
                        "mx1234"
                    ]
                },
                "sessionNumber": {
                    "type": "integer",
                    "description": "The session number within the proposal. This property must be absent if unattendedCollection is present.",
                    "minimum": 1
                },
                "comments": {
                    "type": "string",
                    "description": "A comment about the shipment.",
                    "maxLength": 250
                },
                "unattendedCollection": {
                    "allOf": [
                        {
                            "$ref": "../datatypes/EnumerateTrue.json"
                        }
                    ],
                    "description": "If this shipment is for unattended collection, then this property must be present and true. Otherwise, it must be absent and a sessionNumber must be present."
                },
                "labContactOutbound": {
                    "$ref": "../datatypes/Person.json"
                },
                "labContactReturn": {
                    "$ref": "../datatypes/Person.json"
                },
                "identifiers": {
                    "additionalProperties": {
                        "type": "string"
                    },
                    "description": "Dictionary str:str of contextName: identifier. ContextName will typically refer to a LIMS, database, or web site but could also be e.g. 'smiles' or 'sequence'",
                    "title": "Identifiers",
                    "type": "object"
                },
                "trackingDevice": {
                    "$ref": "../datatypes/TrackingDevice.json"
                }
            },
            "required": [
                "proposalCode"
            ],
            "oneOf": [
                {
                    "required": [
                        "sessionNumber"
                    ]
                },
                {
                    "required": [
                        "unattendedCollection"
                    ]
                }
            ]
        }
    },
    "properties": {
        "data": {
            "allOf": [
                {
                    "$ref": "#/$defs/ShipmentData"
                }
            ]
        },
        "contents": {
            "oneOf": [
                {
                    "type": "array",
                    "items": {
                        "$ref": "../objects/Dewar.json"
                    },
                    "minItems": 1
                },
                {
                    "type": "array",
                    "items": {
                        "$ref": "../objects/Plate.json"
                    },
                    "minItems": 1
                }
            ]
        }
    }
}
